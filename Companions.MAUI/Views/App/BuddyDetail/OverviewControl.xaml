<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:Companions.MAUI.ViewModels.App"
             xmlns:converters="clr-namespace:Companions.MAUI.Converters"
             x:Class="Companions.MAUI.Views.App.BuddyDetail.OverviewControl"
             BackgroundColor="White">
    
    <ContentView.Resources>
        <converters:EndDateToTimeAgoConverter x:Key="DateToTimeAgo"/>
        <converters:TimeBetweenStartEndDateConverter x:Key="TimeBetweenDates"/>
    </ContentView.Resources>
    
    <ScrollView Orientation="Vertical"
                Margin="0,35,0,0">
        <CollectionView ItemsSource="{Binding Buddy.Activities}">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <VerticalStackLayout Margin="0,0,0,20">
                        <VerticalStackLayout >
                            <Grid Margin="0,0,0,15"> 
                                <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="0.2*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                                <Rectangle Grid.RowSpan="2"
                                   Margin="0,0,10,0"
                                   Fill="black"
                                   VerticalOptions="Center"/>
                                
                                <Label Grid.Column="1" Grid.Row="0"
                                       Text="Activity"
                                       Margin="0,0,0,5"
                                       FontFamily="InterSemiBold"
                                       FontSize="16"/>
                                <Label Grid.Column="1" Grid.Row="0"
                                    HorizontalOptions="End"
                                    TextColor="#BDBDBD"
                                    Text="{Binding EndDate, Converter={StaticResource DateToTimeAgo}}"/>

                                <Label Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="2">
                                    <Label.Text>
                                        <MultiBinding Converter="{StaticResource TimeBetweenDates}"
                                                      StringFormat="{}Just finished a {0} hour walk">
                                            <Binding Path="StartDate" />
                                            <Binding Path="EndDate"/>
                                        </MultiBinding>
                                    </Label.Text>
                                </Label>
                        </Grid >
                            <Line
                                X1="40"
                                Y1="0"
                                X2="500"
                                Y2="0"
                                StrokeThickness="1"
                                Stroke="#BDBDBD" />
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </ScrollView>
</ContentView>
 